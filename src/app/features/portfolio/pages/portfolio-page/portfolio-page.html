<div class="mx-40 my-4 p-2">
  @if (errorMarkets()) {
    <p class="text-white text-xl">Unfortunately something went wrong, please try again!</p>
  } @else if (loadingMarkets()) {
    <div
      class="text-white text-2xl font-bold text-center bg-zinc-800 border border-white/5 rounded-2xl p-4"
    >
      <p>Loading...</p>
    </div>
  } @else if (walletElements() && walletData() && walletElements().length > 0) {
    <app-portfolio-info
      [itemsCount]="walletElements().length"
      [totalNetWorth]="totalNetWorth"
      [change24h]="changeInWallet"
    />
    @for (element of walletElements(); track element.name) {
      @for (coin of walletData()?.items; track coin.coinId) {
        @if (element.symbol === coin.coinId) {
          <app-portfolio-card
            [walletAmmount]="coin.walletBalance"
            [totalBalance]="coin.walletBalance * element.current_price"
            [currentPrice]="element.current_price"
            [id]="coin.$id"
            [changePercentage24h]="element.price_change_percentage_24h"
            [img]="element.image"
            [name]="element.name"
            [symbol]="element.symbol"
            (portfolioId)="removeFromPortfolio($event)"
          />
        }
      }
    }
  } @else if (!walletElements() && !walletData() && walletElements().length === 0) {
    <div
      class="text-white text-2xl font-bold text-center bg-zinc-800 border border-white/5 rounded-2xl p-4"
    >
      <p>Nothing to see here!</p>
      <p>Add coins to portfolio ðŸš€</p>
      <div class="mt-4">
        <a class="underline" [routerLink]="['/dashboard']">Go back to dashboard</a>
      </div>
    </div>
  }
</div>
